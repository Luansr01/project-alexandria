{% extends 'alexandria_site/layout.html' %}

{% block content %}
<div class="content">
    <div class="content-section center" style="min-width:90vw; font-size: 1.7rem;">
        <h1 class="title center">Objetivos de Desenvolvimento Sustentável</h1>
    <p>Aqui ficam os projetos executados por meio do programa SOMAR, categorizados todos no Objetivo de Desenvolvimento Social para que o projeto contribui.</p><br>
    </div>

    <hr>

    <div class="content-section" style="display: flex;justify-content: left; margin: 0 auto; width: 100rem;">

        <div class="accordion-wrapper" id="accordionWrapper"> 

            <div class="accordion-nav">
                <div class="content-section" id="accordionNavContent">
                    
                </div>
            </div>

            <div class="menu">
                <!-- <div class="filter-wrapper">
                    <div class="filter">
                    <input type="radio" id="ODS" name="filter" value="true" checked>
                    <label for="ODS">Objetivos de Desenvolvimento Sustentável</label>
                    </div>

                    <div class="filter">
                    <input type="radio" id="Cidade" name="filter" value="false" >
                    <label for="ODS">Cidade</label>
                    </div>

                    <div class="filter">
                    <input type="radio" id="Causa" name="filter" value="false" >
                    <label for="ODS">Causa</label>
                    </div>

                    <div class="filter">
                    <input type="radio" id="Público-Alvo" name="filter" value="false" >
                    <label for="ODS">Público-Alvo</label>
                    </div>
                </div> -->
                <div class="filter-wrapper">
                    <form action="#" method="GET" onchange="form.submit()">
                        {% csrf_token %}
                        {{form}} {{req}}
                    </form>
                </div>
                
                {% if filter == 'ods'%}
                    {% for objective in objectives %}
                    <button style="font-weight: 200;" class="accordion" onclick="accordionToggleDown(this)">{{objective}} | {{objective.project_set.all.count}}</button>
                    <div class="panel down">
                        {% for project in objective.project_set.all %}
                        <div>
                            <div class="projects" >
                                <button style="font-weight: 200;" class="sub accordion" id="{{project}}" onclick="accordionNavToggle(this)">{{project}} | <small>{{project.state}} - {{project.city}}</small></button>
                            </div>
                            <div class="hidden content-section" id="{{project}}-content">
                                <p class="title" style="text-align: center;">{{project}}</p>
                                <hr>
                                    <div style="font-size: calc(var(--fontSize) * 0.015);">
                                        {{project.about | linebreaks | truncatewords:120}}
                                    </div>
                                <hr>
                                <a href="{%url 'project' project.slug%}"> <button class="link-button" style="width: 93%; border-radius: 0.5vw;"> Leia Mais </button></a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}
                
                {% elif filter == 'estado' %}

                    {% for estado in estados %}
                    <button style="font-weight: 200;" class="accordion" onclick="accordionToggleDown(this)">{{estado.0}} | {{objective.project_set.all.count}}</button>
                    <div class="panel down">
                        {% for project in objective.project_set.all %}
                        <div>
                            <div class="projects" >
                                <button style="font-weight: 200;" class="sub accordion" id="{{project}}" onclick="accordionNavToggle(this)">{{project}} | <small>{{project.state}} - {{project.city}}</small></button>
                            </div>
                            <div class="hidden content-section" id="{{project}}-content">
                                <p class="title" style="text-align: center;">{{project}}</p>
                                <hr>
                                    <div style="font-size: calc(var(--fontSize) * 0.015);">
                                        {{project.about | linebreaks | truncatewords:120}}
                                    </div>
                                <hr>
                                <a href="{%url 'project' project.slug%}"> <button class="link-button" style="width: 93%; border-radius: 0.5vw;"> Leia Mais </button></a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endfor %}

                {% elif filter == 'causa' %}
                    bbbbbbbbbbbbbb

                {% elif filter == 'cidade' %}
                    cccccccccccccc
                {%endif%}
            </div>

        </div>

        {% comment %} <div id="accordionNav" class="panel right">
            <div class="accordion-nav-content">a</div>
        </div> {% endcomment %}


    </div>

</div>
{% endblock content %}